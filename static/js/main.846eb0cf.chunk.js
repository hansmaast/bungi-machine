(this.webpackJsonpbungi=this.webpackJsonpbungi||[]).push([[0],{87:function(e,t,n){"use strict";n.r(t);var r,a,i,c,o=n(13),s=n(57),d=n.n(s),l=n(27),u=n(51),b=n(17),p=Array.from(Array(16).keys()),g=["C","Db","Eb","F","Gb","G","Ab","Bb"].reverse(),j="KICK",f="SNARE",h="HIHAT",O="HIHAT_OPEN",x="TOM",v=["0:0:0","0:0:1","0:0:2","0:0:3","0:1:0","0:1:1","0:1:2","0:1:3","0:2:0","0:2:1","0:2:2","0:2:3","0:3:0","0:3:1","0:3:2","0:3:3"].reverse(),m=n(26),S=n.p+"static/media/kick.e8c4f08a.mp3",k=n.p+"static/media/snare.ebab59a2.mp3",w=n.p+"static/media/hihat.0dbc2e7a.mp3",y=n.p+"static/media/tom1.7e5272fb.mp3",E=new m.e({urls:{C1:S,D1:k,E1:w,F1:y}}).toDestination(),T=n(8),C="SELECT_DRUM",H="SELECT_SYNTH",R="SET_TEMPO",D="SET_ACTIVE_STEP",A="SET_TRIGGERED_KICKS",I="SET_TRIGGERED_SNARES",P="SET_TRIGGERED_HIHATS",G="SET_TRIGGERED_OPEN_HIHATS",_="SET_TRIGGERED_TOMS",W=function(e,t){switch(t.type){case C:return Object(T.a)(Object(T.a)({},e),{},{selectedDrumSound:t.payload});case H:return Object(T.a)(Object(T.a)({},e),{},{selectedSynthSound:t.payload});case R:return Object(T.a)(Object(T.a)({},e),{},{tempo:t.payload});case D:return Object(T.a)(Object(T.a)({},e),{},{activeStep:t.payload});case A:return Object(T.a)(Object(T.a)({},e),{},{triggeredKicks:t.payload});case I:return Object(T.a)(Object(T.a)({},e),{},{triggeredSnares:t.payload});case P:return Object(T.a)(Object(T.a)({},e),{},{triggeredHiHats:t.payload});case G:return Object(T.a)(Object(T.a)({},e),{},{triggeredOpenHiHats:t.payload});case _:return Object(T.a)(Object(T.a)({},e),{},{triggeredToms:t.payload});default:return e}},K=n(14),F={tempo:125,loopEnd:"1:0:0",isLooping:!0,note:"",steps:v,activeStep:null,selectedDrumSound:j,selectedSynthSound:"SQURE",triggeredKicks:{},triggeredSnares:{},triggeredHiHats:{},triggeredOpenHiHats:{},triggeredToms:{},releaseInSeconds:.03},L=Object(o.createContext)(F),z=L.Provider,M=function(e){var t=e.children,n=Object(o.useReducer)(W,F),r=Object(b.a)(n,2),a=r[0],i=r[1];return Object(o.useEffect)((function(){a.triggeredKicks[a.activeStep]&&E.triggerAttackRelease("C1",.5),a.triggeredSnares[a.activeStep]&&E.triggerAttackRelease("D1",.5),a.triggeredHiHats[a.activeStep]&&E.triggerAttackRelease("E1",.5),a.triggeredOpenHiHats[a.activeStep]&&E.triggerAttackRelease("E1",.5),a.triggeredToms[a.activeStep]&&E.triggerAttackRelease("F1",.5)}),[a.activeStep,a.triggeredSteps]),Object(K.jsx)(z,{value:{state:a,dispatch:i},children:t})},N=function(){return Object(o.useContext)(L)},X=n(28),U=n(25),B=n(22),Y=Object(U.css)(r||(r=Object(X.a)(["\n -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n     -khtml-user-select: none; /* Konqueror HTML */\n       -moz-user-select: none; /* Firefox */\n        -ms-user-select: none; /* Internet Explorer/Edge */\n            user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome and Opera */\n"]))),q=Object(U.css)(a||(a=Object(X.a)(["\n  /* Hide scrollbar for Chrome, Safari and Opera */\n  &::-webkit-scrollbar {\n    display: none;\n  }\n  -ms-overflow-style: none;  /* IE and Edge */\n  scrollbar-width: none;  /* Firefox */\n"]))),J=U.default.button(i||(i=Object(X.a)(["\n  z-index: 10;\n  background-color: ",";;\n  color: ",";\n  border: 1px solid;\n  border-radius: 4px;\n  ",";\n  ",";\n  ",";\n  ",";\n  ",";\n"])),(function(e){return e.isOpen?"black":"white"}),(function(e){return e.isOpen?"white":"black"}),Y,B.e,B.f,B.g,B.d);J.defaultProps={position:"fixed",top:0,left:0,marginY:3,marginX:[3,4,6],padding:[2],paddingX:3,fontSize:4};var Q,V=U.default.div(c||(c=Object(X.a)(["\n transform: ",";\n  background-color: black;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n  transition: transform 0.1s ease-in-out;\n ",";\n  ",";\n  ",";\n  ",";\n  ",";\n"])),(function(e){return e.isOpen?"":"translateX(-100%)"}),B.e,B.f,B.d,B.b,B.c);V.defaultProps={position:"absolute",top:0,bottom:0,maxWidth:["100vw","50vw"]};var $,Z=Object(U.default)(u.b)(Q||(Q=Object(X.a)(["\n    background-color: black;\n    color: whitesmoke;\n    transition: all 0.2s ease-in-out;\n    &:focus, :hover {\n        transform: scale(1.2);\n        box-shadow: 0px 0px 30px 30px rgba(250,250,250, 0.4) inset, 0px 0px 20px 10px rgba(250, 250,250, 0.7);\n    };\n    ",";\n    ",";\n"])),B.f,B.b);function ee(){var e=N().dispatch,t=Object(o.useState)(!1),n=Object(b.a)(t,2),r=n[0],a=n[1],i=Object(o.useState)(!1),c=Object(b.a)(i,2),s=c[0],d=c[1],l=function(){e({type:D,payload:"YES"}),a(!r)};return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(J,{isOpen:r,onClick:l,children:r?"X":"O"}),Object(K.jsxs)(V,{isOpen:r,children:[Object(K.jsx)(J,{zIndex:25,left:"",right:0,isOpen:s,onClick:function(){return d(!s)},children:s?"X":"|||"}),Object(K.jsx)(V,{flexWrap:"wrap",zIndex:20,isOpen:s,bg:"gray"}),Object(K.jsx)(Z,{to:"/rythm",onClick:l,children:"Riddm"}),Object(K.jsx)(Z,{to:"/grid-goon",onClick:l,children:"Grid Goon"})]})]})}Z.defaultProps={padding:5,m:3};var te,ne=U.default.div($||($=Object(X.a)(["\n  ","\n  ",";\n  ",";\n  ",";\n  ",";\n  ",";\n  ",";\n"])),(function(e){return e.hideScrollbar?q:""}),B.f,B.d,B.c,B.b,B.e,B.a);ne.defaultProps={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:1};var re,ae=U.default.div(te||(te=Object(X.a)(["\n    display: grid;\n    direction: ",";\n    grid-gap: 5px;\n    height: 100vw;\n    width: 100%;\n    grid-template-columns: repeat(",", 1fr);\n    grid-template-rows: repeat(",", 1fr);\n    ",";\n    ",";\n"])),(function(e){return e.reverse?"rtl":""}),4,4,B.c,B.d);ae.defaultProps={padding:[2,4],maxHeight:["100vh","70vh"],maxWidth:["100vh","70vh"]};var ie=U.default.button(re||(re=Object(X.a)(["\n    height: 100%;\n    transition: all 0.15s;\n    border: 1px solid;\n    background-color: ",";\n    border-radius: ",";\n    ",";\n    ","\n"])),(function(e){return e.isTouched?"black":"transparent"}),(function(e){return e.isTouched?"50%":"5%"}),Y,B.b);function ce(e){var t=e.voice,n=e.note,r=e.octave,a=Object(o.useState)(!1),i=Object(b.a)(a,2),c=i[0],s=i[1],d=function(e){e.preventDefault(),s(!0),t.triggerAttack(n+r,m.h())},l=function(e){e.preventDefault(),s(!1),t.triggerRelease(m.h())};return Object(K.jsx)(ie,{isTouched:c,onMouseDown:d,onMouseUp:l,onTouchStart:d,onTouchEnd:l,children:n+r})}var oe,se=new m.f({volume:-10,envelope:{attack:.01,release:.2,sustain:.5}}).toDestination();new m.d({frequency:60,type:"triangle9"}),new m.c({type:"white",volume:-10}),new m.a({attack:.01,decay:.3,sustain:.5,release:.5}).toDestination(),new m.a({attack:.01,decay:.2,sustain:1,release:.01}).toDestination();function de(){return Object(K.jsx)(ne,{height:"100%",children:Object(K.jsx)(ae,{children:p.map((function(e){var t="3",n=g[e];return e>7&&(n=g[e-g.length],t="2"),Object(K.jsx)(ce,{voice:se,note:n,octave:t})}))})})}function le(){return Object(K.jsxs)(ne,{height:"100%",children:[Object(K.jsx)(Z,{to:"grid-goon",children:"Grid Goon"}),Object(K.jsx)(Z,{to:"rythm",children:"Riddm"})]})}var ue=U.default.button(oe||(oe=Object(X.a)(['\n  border: 1px solid;\n  border-radius: 4px;\n  font-weight: "200";\n  white-space: nowrap;\n  color: ',";\n  background-color: ",";\n  transform: ",";\n  transition: transform 0.25s ease-out, background-color 0.05s ease-in;\n  ",";\n  ",";\n  ",";\n  ",";\n  ",";\n"])),(function(e){return e.isSelected?"white":"black"}),(function(e){return e.isSelected?"black":"white"}),(function(e){return e.isSelected?"scale(1.15)":""}),Y,B.e,B.f,B.g,B.d);function be(){var e=N(),t=e.state,n=e.dispatch,r=function(e){return n({type:C,payload:e.currentTarget.name})},a=function(e){return t.selectedDrumSound===e};return Object(K.jsx)("header",{children:Object(K.jsxs)(ne,{hideScrollbar:!0,borderRightWidth:8,borderColor:"transparent",borderRightStyle:"solid",p:"0",maxWidth:"100vw",flexDirection:"row",overflowX:"scroll",justifyContent:"space-between",children:[Object(K.jsx)(ue,{isSelected:a(j),name:j,onClick:r,children:"Kick"}),Object(K.jsx)(ue,{isSelected:a(f),name:f,onClick:r,children:"Snare"}),Object(K.jsx)(ue,{isSelected:a(h),name:h,onClick:r,children:"Hi-Closed"}),Object(K.jsx)(ue,{isSelected:a(O),name:O,onClick:r,children:"Hi-Open"}),Object(K.jsx)(ue,{isSelected:a(x),name:x,onClick:r,children:"TomTom"})]})})}ue.defaultProps={marginY:3,mx:2,padding:[2],paddingX:3,fontSize:3,type:"button"};var pe=n(38);function ge(e){var t,n,r=e.step,a=N(),i=a.state,c=a.dispatch,o=i.activeStep;switch(i.selectedDrumSound){case j:t=A,n=i.triggeredKicks;break;case f:t=I,n=i.triggeredSnares;break;case h:t=P,n=i.triggeredHiHats;break;case O:t=G,n=i.triggeredOpenHiHats;break;case x:t=_,n=i.triggeredToms;break;default:t=A,n=i.triggeredKicks}return Object(K.jsx)(ie,{onClick:function(){c({type:t,payload:Object(T.a)(Object(T.a)({},n),{},Object(pe.a)({},r,!n[r]))})},isTouched:o===r,bg:n[r]?"salmon":"",children:r})}function je(){var e=N().state;return Object(K.jsx)(ae,{reverse:!0,children:e.steps.map((function(e){return Object(K.jsx)(ge,{step:e},e)}))})}var fe=n(9),he=n.n(fe),Oe=n(16),xe=n(18);function ve(){var e=m.g.position.toString();return e.slice(0,e.indexOf("."))}function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"16n";m.g.scheduleRepeat((function(t){var n=ve();m.b.schedule((function(){e({type:D,payload:n}),console.log(n)}),t)}),t)}function Se(){return(Se=Object(Oe.a)(he.a.mark((function e(t){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("started"!==m.g.state){e.next=2;break}return e.abrupt("return",m.g.pause());case 2:return e.next=4,Object(xe.c)();case 4:return me(t,"16n"),e.abrupt("return",m.g.start());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){var e=N(),t=e.state,n=e.dispatch;return m.g.loop=t.isLooping,m.g.loopEnd=t.loopEnd,Object(K.jsxs)(ne,{justifyContent:"space-between",children:[Object(K.jsx)("h1",{children:"Bungi"}),Object(K.jsx)(ue,{type:"button",onClick:function(){return function(e){return Se.apply(this,arguments)}(n)},children:"started"!==m.g.state?"Play":"Pause"}),Object(K.jsx)(be,{}),Object(K.jsx)(je,{})]})}var we=U.default.div(B.e);function ye(){return Object(K.jsxs)(l.c,{children:[Object(K.jsx)(l.a,{exact:!0,path:"/",children:Object(K.jsx)(le,{})}),Object(K.jsx)(l.a,{path:"/rythm",children:Object(K.jsx)(ke,{})}),Object(K.jsx)(l.a,{path:"/grid-goon",children:Object(K.jsx)(de,{})})]})}we.defaultProps={position:"absolute",top:0,bottom:0,right:0,left:0};var Ee=function(){return Object(K.jsx)(u.a,{basename:"/bungi-machine",children:Object(K.jsxs)(we,{children:[Object(K.jsx)(ee,{}),Object(K.jsx)(ye,{})]})})},Te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ce(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var He,Re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,88)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))},De=n(62),Ae=Object(U.createGlobalStyle)(He||(He=Object(X.a)(["\n ","\n  :root,\n  html,\n  body {\n    margin: 0;\n    font-family: Arial;\n  }\n\n  * {\n      box-sizing: border-box;\n      -webkit-appearance: none;\n      text-decoration: none;\n\n  }\n\n  button {\n    background-color: transparent;\n  }\n"])),De.normalize);d.a.render(Object(K.jsx)(o.StrictMode,{children:Object(K.jsxs)(M,{children:[Object(K.jsx)(Ae,{}),Object(K.jsx)(Ee,{})]})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/bungi-machine",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/bungi-machine","/service-worker.js");Te?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ce(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Ce(t,e)}))}}(),Re()}},[[87,1,2]]]);
//# sourceMappingURL=main.846eb0cf.chunk.js.map